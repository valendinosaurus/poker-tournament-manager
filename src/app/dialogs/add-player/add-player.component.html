<ng-container *ngIf="data.multi; else formSingle">
    <h2>Add Players to "{{ data.tournament.name }}"</h2>

    <form
        [formGroup]="form"
    >
        <formly-form
            [form]="form"
            [fields]="fields"
            [options]="options"
            [model]="modelMulti"
        ></formly-form>

        <button
            mat-flat-button color="primary"
            type="submit"
            (click)="onSubmitMulti(modelMulti, false)"
            [disabled]="!form.valid"
        >
            ADD
        </button>

        <button
            mat-flat-button color="primary"
            type="submit"
            (click)="onSubmitMulti(modelMulti, true)"
            [disabled]="!form.valid"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-container>

<ng-template #formSingle>
    <h2>Add Player to "{{ data.tournament.name }}"</h2>

    <form
        [formGroup]="form"
    >

        <formly-form
            [form]="form"
            [fields]="fields"
            [options]="options"
            [model]="model"
        ></formly-form>

        <button
            mat-flat-button color="primary"
            type="submit"
            [disabled]="!form.valid"
            (click)="onSubmit(model, false)"
        >
            ADD
        </button>

        <button
            mat-flat-button color="primary"
            type="submit"
            [disabled]="!form.valid"
            (click)="onSubmit(model, true)"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-template>

<h3>Players in Tournament</h3>

<ng-container *ngIf="data.tournament && data.tournament.players.length > 0; else noPlayers;">
    <table class="player-table">
        <ng-container *ngFor="let e of data.tournament.players">
            <tr>
                <td>
                    <span class="flextd">
                        <app-user-image-round
                            [imageUrl]="e.image"
                        ></app-user-image-round>

                        <span>{{ e.name }}</span>
                    </span>
                </td>
                <td>
                    <ng-container *ngIf="hasPlayerEntered(e.id)">
                        <i class="fa fa-money"></i>
                    </ng-container>
                </td>
                <td>
                    <ng-container *ngIf="isPlayerFinished(e.id)">
                        <i class="fa fa-skull">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 512 512">
                                <path
                                    d="M416 398.9c58.5-41.1 96-104.1 96-174.9C512 100.3 397.4 0 256 0S0 100.3 0 224c0 70.7 37.5 133.8 96 174.9c0 .4 0 .7 0 1.1v64c0 26.5 21.5 48 48 48h48V464c0-8.8 7.2-16 16-16s16 7.2 16 16v48h64V464c0-8.8 7.2-16 16-16s16 7.2 16 16v48h48c26.5 0 48-21.5 48-48V400c0-.4 0-.7 0-1.1zM96 256a64 64 0 1 1 128 0A64 64 0 1 1 96 256zm256-64a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/>
                            </svg>
                        </i>
                    </ng-container>
                </td>
                <td>
                    <ng-container *ngIf="!isPlayerFinished(e.id) && !hasPlayerEntered(e.id);">
                        <i (click)="removePlayer(e.id, e.name)" class="fa fa-trash"></i>
                    </ng-container>
                </td>
            </tr>
        </ng-container>
    </table>
</ng-container>

<ng-template #noPlayers>
    No players yet
</ng-template>
