<ng-container *ngIf="data.multi; else formSingle">
    <h2><i class="fa fa-user"></i> Add Players to "{{ tournament().name }}"</h2>

    <form (ngSubmit)="onSubmit(false)">
        <mat-form-field class="w-100">
            <mat-label>Player *</mat-label>
            <mat-select
                name="eliminated"
                [multiple]="true"
                (selectionChange)="onSelectPlayersMulti($event)"
            >
                @for (player of playersToAdd(); track player.value) {
                    <mat-option [value]="player.value">
                        {{ player.label }}
                    </mat-option>
                }
            </mat-select>
        </mat-form-field>

        <button
            mat-raised-button
            color="primary"
            type="submit"
            (click)="onSubmitMulti(false)"
            [disabled]="!modelMulti.isValid()"
        >
            ADD
        </button>

        <button
            mat-raised-button
            color="accent"
            type="submit"
            (click)="onSubmitMulti(true)"
            [disabled]="!modelMulti.isValid()"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-container>

<ng-template #formSingle>
    <h2><i class="fa fa-user"></i> Add Player to "{{ tournament().name }}"</h2>

    <form>
        <mat-form-field class="w-100">
            <mat-label>Player *</mat-label>
            <mat-select
                name="eliminated"
                (selectionChange)="this.model.playerId.set($event.value)"
            >
                @for (player of playersToAdd(); track player.value) {
                    <mat-option [value]="player.value">
                        {{ player.label }}
                    </mat-option>
                }
            </mat-select>
        </mat-form-field>

        <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="!model.isValid()"
            (click)="onSubmit(false)"
        >
            ADD
        </button>

        <button
            mat-raised-button
            color="accent"
            type="submit"
            [disabled]="!model.isValid()"
            (click)="onSubmit(true)"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-template>

<h3>Players in Tournament</h3>

<ng-container *ngIf="tournament() && tournament().players?.length; else noPlayers;">
    <div class="scrollable-dialog-table-wrapper">
        <table class="dialog-table">
            <ng-container *ngFor="let e of tournament().players">
                <tr>
                    <td>
                    <span class="flex-td">
                        <app-user-image-round
                            [imageUrl]="e.image"
                        ></app-user-image-round>

                        <span>{{ e.name }}</span>
                    </span>
                    </td>
                    <td>
                        <ng-container *ngIf="hasPlayerEntered(e.id)">
                            <i class="fa fa-money-bill-wave"></i>
                        </ng-container>
                    </td>
                    <td>
                        <ng-container *ngIf="isPlayerFinished(e.id)">
                            <i class="fa fa-skull"></i>
                        </ng-container>
                    </td>
                    <td>
                        <ng-container *ngIf="!isPlayerFinished(e.id) && !hasPlayerEntered(e.id);">
                            <i (click)="removePlayer(e.id, e.name)" class="fa fa-trash"></i>
                        </ng-container>
                    </td>
                </tr>
            </ng-container>
        </table>
    </div>
</ng-container>

<ng-template #noPlayers>
    No players yet
</ng-template>
