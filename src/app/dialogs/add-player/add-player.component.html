<ng-container *ngIf="data.multi; else formSingle">
    <h2><i class="fa fa-user"></i> Add Players to "{{ data.tournament.name }}"</h2>

    <form
        [formGroup]="form"
    >
        <formly-form
            [form]="form"
            [fields]="fields"
            [options]="options"
            [model]="modelMulti"
        ></formly-form>

        <button
            mat-raised-button color="primary"
            type="submit"
            (click)="onSubmitMulti(modelMulti, false)"
            [disabled]="!form.valid"
        >
            ADD
        </button>

        <button
            mat-raised-button color="primary"
            type="submit"
            (click)="onSubmitMulti(modelMulti, true)"
            [disabled]="!form.valid"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-container>

<ng-template #formSingle>
    <h2><i class="fa fa-user"></i> Add Player to "{{ data.tournament.name }}"</h2>

    <form
        [formGroup]="form"
    >

        <formly-form
            [form]="form"
            [fields]="fields"
            [options]="options"
            [model]="model"
        ></formly-form>

        <button
            mat-raised-button color="primary"
            type="submit"
            [disabled]="!form.valid"
            (click)="onSubmit(model, false)"
        >
            ADD
        </button>

        <button
            mat-raised-button color="primary"
            type="submit"
            [disabled]="!form.valid"
            (click)="onSubmit(model, true)"
        >
            ADD WITH ENTRY
        </button>
    </form>
</ng-template>

<h3>Players in Tournament</h3>

<ng-container *ngIf="data.tournament && data.tournament.players.length > 0; else noPlayers;">
    <div class="scrollable-dialog-table-wrapper">
        <table class="dialog-table">
            <ng-container *ngFor="let e of data.tournament.players">
                <tr>
                    <td>
                    <span class="flex-td">
                        <app-user-image-round
                            [imageUrl]="e.image"
                        ></app-user-image-round>

                        <span>{{ e.name }}</span>
                    </span>
                    </td>
                    <td>
                        <ng-container *ngIf="hasPlayerEntered(e.id)">
                            <i class="fa fa-money-bill-wave"></i>
                        </ng-container>
                    </td>
                    <td>
                        <ng-container *ngIf="isPlayerFinished(e.id)">
                            <i class="fa fa-skull"></i>
                        </ng-container>
                    </td>
                    <td>
                        <ng-container *ngIf="!isPlayerFinished(e.id) && !hasPlayerEntered(e.id);">
                            <i (click)="removePlayer(e.id, e.name)" class="fa fa-trash"></i>
                        </ng-container>
                    </td>
                </tr>
            </ng-container>
        </table>
    </div>
</ng-container>

<ng-template #noPlayers>
    No players yet
</ng-template>
